{% extends 'votes/decision/base_decision.html' %}

{% load static %}

{% block scripts %}
    {{ block.super }}
    <script src="{% static 'votes/js/luxon.min.js' %}"></script>
    <script src="{% static 'votes/js/datetime-buttons.js' %}"></script>
{% endblock %}

{% block column %}
    <div class="box">
        <h1 class="title is-4">Neue Abstimmung</h1>
        <form method="post">
            {% csrf_token %}

            <div class="columns">
                <div class="column">
                    <div class="field">
                        <label class="label" for="{{ form.subject.id_for_label }}">{{ form.subject.label }}</label>
                        <div class="control">
                            {{ form.subject }}
                        </div>
                        {% for error in form.subject.errors %}
                            <p class="help is-danger">{{ error }}</p>
                        {% endfor %}
                    </div>

                    <div class="field">
                        <label class="label" for="{{ form.start.id_for_label }}">{{ form.start.label }}</label>

                        {% include 'votes/decision/snippet_datetime_input.html' with field=form.start %}

                        {% for error in form.start.errors %}
                            <p class="help is-danger">{{ error }}</p>
                        {% endfor %}
                    </div>

                    <div class="field">
                        <label class="label" for="{{ form.end.id_for_label }}">{{ form.end.label }}</label>

                        {% include 'votes/decision/snippet_datetime_input.html' with field=form.end %}

                        {% for error in form.end.errors %}
                            <p class="help is-danger">{{ error }}</p>
                        {% endfor %}
                    </div>
                </div>

                <div class="column is-one-third">
                    <div class="field">
                        <label class="label" for="{{ form.voters.id_for_label }}">{{ form.voters.label }}</label>

                        <div class="select is-multiple">
                            {{ form.voters }}
                        </div>

                        <p class="help">
                            Benutze <code>shift</code> zum Markieren von mehreren Personen.
                        </p>

                        <p class="help">
                            Benutze <code>cmd</code> bzw. <code>strg</code> zum Ausw√§hlen von mehreren Personen.
                        </p>

                        {% for error in form.voters.errors %}
                            <p class="help is-danger">{{ error }}</p>
                        {% endfor %}
                    </div>
                </div>
            </div>

            <div class="field">
                <div class="control">
                    <button type="submit" class="button is-primary">Erstellen</button>
                </div>

                {% for error in form.non_field_errors %}
                    <p class="help is-danger">{{ error }}</p>
                {% endfor %}
            </div>
        </form>
    </div>
{% endblock %}
